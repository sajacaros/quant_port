# Chapter9 동적 크롤링과 정규 표현식
## 9.1 동적 크롤링이란?
* 동적 데이터 특징
  * 입력, 클릭, 로그인 등의 행위를 했을때 데이터가 바뀜
### 9.1.1 셀레늄 실습하기
* selenium 설치 및 지원 도구 설치
``` 
pip install selenium
pip install webdriver_manager
```
* 설치 확인
``` 
## selenium, webdriver 설치 확인
import selenium
from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from webdriver_manager.chrome import ChromeDriverManager

driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()))
```
* naver 페이지 크롤링하기
``` 
# naver 페이지 가져오기
driver.get('https://www.naver.com')
driver.page_source[1:1000]

# 뉴스 카테고리 클릭
from selenium.webdriver.common.by import By
driver.find_element(By.LINK_TEXT, value='뉴스').click()

# 뒤로 가기
driver.back()

# 검색창에 검색어 넣기
driver.find_element(By.CLASS_NAME, value='search_input').send_keys('퀀트 투자 포트폴리오 만들기')

# 엔터 이벤트 주기
from selenium.webdriver.common.keys import Keys
driver.find_element(By.CLASS_NAME, value='btn_search').send_keys(Keys.ENTER)
# driver.find_element(By.CLASS_NAME, value='btn_search').click()

# XPATH를 이용해 VIEW 클릭 동작
driver.find_element(By.XPATH, value='//*[@id="lnb"]/div[1]/div/ul/li[2]').click()

# XPATH를 이용해 옵션 클릭 동작
driver.find_element(By.XPATH, value='//*[@id="snb"]/div[1]/div/div[3]/a').click()

# 옵션창 닫기
driver.find_element(By.CLASS_NAME, value='bt_close').click()
driver.find_element(By.XPATH, value='//*[@id="snb"]/div[2]/button').click()

# 옵셩창 열고 최신순 클릭
driver.find_element(By.XPATH, value='//*[@id="snb"]/div[1]/div/div[3]/a').click()
driver.find_element(By.XPATH, value='//*[@id="snb"]/div[2]/ul/li[2]/div/div/a[2]').click()

# page down 기능 수행
driver.find_element(By.TAG_NAME, value='body').send_keys(Keys.PAGE_DOWN)
# driver.execute_script('window.scrollTo(0, document.body.scrollHeight);')

# 스크롤 끝까지 내리기
import time
prev_height = driver.execute_script('return document.body.scrollHeight')

while True:
    driver.execute_script('window.scrollTo(0, document.body.scrollHeight);')
    time.sleep(2)
    
    curr_height = driver.execute_script('return document.body.scrollHeight')
    if curr_height == prev_height:
        break
    prev_height = curr_height
    
# 제목 크롤링
from bs4 import BeautifulSoup
html = BeautifulSoup(driver.page_source, 'lxml')
txt = html.find_all(class_ = 'api_txt_lines total_tit _cross_trigger')
txt_list = [i.get_text() for i in txt]

txt_list[0:10]

# driver 종료
driver.quit()
```
### 9.1.2 셀레늄 명령어 정리
#### 9.1.2.1 브라우저 관련
* webdriver.Chrome() : 브라우저 열기
* driver.close() : 현재 탭 닫기
* driver.quit() : 브라우저 닫기
* driver.back() : 뒤로 가기
* driver.forward() : 앞으로 가기
#### 9.1.2.2 엘리먼트 접근
* By.ID : 태그의 ID 값으로 추출
* By.NAME : 태그의 NAME 값으로 추출
* By.XPATH : 태그의 XPATH 값으로 추출
* By.LINK_TEXT : 링크에 존재하는 텍스트로 추출
* By.TAG_NAME : 태그명으로 추출
* By.CLASS_NAME : 태그의 클래스명으로 추출
* By.CSS_SELECTOR : CSS 선택자로 추출
#### 9.1.2.3 동작
* click() : 엘리먼트를 클릭
* clear() : 텍스트 삭제
* send_keys(text) : 텍스트 입력
* send_keys(Keys.CONTROL + 'v') : 컨트롤 + v 누르기
#### 9.1.2.4 자바스크립트 코드 실행
* execute_script() : 자바스크릭트 코드 실행
* Document : https://selenium-python.readthedocs.io/
## 9.2 정규 표현식
### 9.2.1 정규 표현식을 알아야 하는 이유
### 9.2.2 메타 문자
### 9.2.3 정규식을 이용한 문자열 검색
### 9.2.4 정규 표현식 연습해 보기